<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Invoice Genie</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="container">

    <div class="header">
        <div class="header-title">ğŸ“„ Invoice Genie</div>
        <div class="header-subtitle">PDF ì¸ë³´ì´ìŠ¤ ì—…ë¡œë“œ â†’ ìë™ ë¶„ì„</div>
    </div>

    <form method="POST" enctype="multipart/form-data">
        <label class="upload-box">
            <span class="upload-text-main">ì—¬ê¸°ë¥¼ í´ë¦­í•˜ì—¬ ì¸ë³´ì´ìŠ¤ PDF ì—…ë¡œë“œ</span>
            <span class="upload-text-sub">PDFë§Œ ì§€ì›í•©ë‹ˆë‹¤</span>

            <input type="file" name="file" class="file-input" onchange="this.form.submit()">

            {% if filename %}
            <div class="file-info">
                <span class="check-icon">âœ”</span>
                {{ filename }}
            </div>
            {% endif %}
        </label>
    </form>

    {% if result %}
    <button onclick="window.location.href='/'" class="file-button">ìƒˆ íŒŒì¼ ì—…ë¡œë“œ</button>

    <div class="result-card">
        <div class="result-header">
            <div class="result-label">Vendor</div><div>{{ result.vendor }}</div>
            <div class="result-label">Currency</div><div>{{ result.currency }}</div>
            <div class="result-label">Ref PO</div><div>{{ result.summary.po_list }}</div>
            <div class="result-label">Invoice Date</div><div>{{ result.summary.date }}</div>
        </div>

        <table class="result-table">
            <thead>
            <tr>
                <th>Item</th>
                <th>Quantity</th>
                <th>Total Amount ({{ result.currency }})</th>
            </tr>
            </thead>
            <tbody>
            {% for name, info in result.summary.items %}
                {% if name not in ["date", "po_list"] %}
                <tr>
                    <td>{{ name }}</td>
                    <td>{{ info.qty }}</td>
                    <td>{{ "{:,.2f}".format(info.total) }}</td>
                </tr>
                {% endif %}
            {% endfor %}
            </tbody>
            <tfoot>
            <tr>
                <td>í•©ê³„</td>
                <td>{{ result.summary.total_qty }}</td>
                <td>{{ "{:,.2f}".format(result.summary.total_amount) }}</td>
            </tr>
            </tfoot>
        </table>
    </div>
    {% endif %}

</div>
</body>
</html>

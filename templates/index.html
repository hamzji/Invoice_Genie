<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ğŸ§™â€â™‚ï¸ Invoice Genie | ì¸ë³´ì´ìŠ¤ ë§ˆë²• ì •ë¦¬ ë„êµ¬</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif; 
            background:#f4f0ff; margin:0; padding:40px; color:#333; }
        h1 { font-size:45px; color:#5b22d6; }
        .drop-zone {
            border: 3px dashed #8e59ff; padding: 70px; background:white;
            text-align:center; font-size:20px; border-radius:15px;
            cursor:pointer; transition: background 0.2s;
        }
        .drop-zone.dragover { background:#efe7ff; }
        button {
            padding:14px 35px; margin-top:20px; font-size:20px; 
            border-radius:10px; background:#8b48ff; color:white; border:none;
            cursor:pointer; transition:0.2s;
        }
        button:hover { background:#6925d4; }
        .result { margin-top:35px; padding:25px; border-radius:12px; background:#fff; }
        .file-info { margin-top:10px; font-size:18px; color:#444; }
        table { width:100%; border-collapse: collapse; margin-top:20px; background:white; }
        th, td { border:1px solid #ddd; padding:12px; text-align:center; }
        th { background:#e7dbff; }
        .footer { margin-top:40px; text-align:center; color:#777; font-size:14px; }
    </style>
</head>

<body>
<h1>ğŸ§™â€â™‚ï¸ Invoice Genie</h1>
<p>ë Œì¦ˆ ì¸ë³´ì´ìŠ¤ì—ì„œ ìë™ìœ¼ë¡œ ìˆ˜ëŸ‰/ì´ê¸ˆì•¡/PO ì •ë³´ë¥¼ ì¶”ì¶œí•´ ì •ë¦¬í•´ì£¼ëŠ” ë§ˆë²• ë„êµ¬ì…ë‹ˆë‹¤.</p>

<form method="POST" enctype="multipart/form-data">
    <div class="drop-zone" id="dropZone">ğŸ“ PDF íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•´ ì˜¬ë ¤ì£¼ì„¸ìš”!</div>
    <input type="file" name="file" id="fileInput" style="display:none;" accept="application/pdf">
    <button type="submit">âœ¨ ë¶„ì„í•˜ê¸°</button>
</form>

{% if filename %}
<p class="file-info">ğŸ“„ ì—…ë¡œë“œëœ íŒŒì¼: <b>{{ filename }}</b></p>
{% endif %}

{% if invoice_date or po_numbers or result %}
<div class="result">

{% if invoice_date %}
<p><b>ğŸ—“ Invoice Date:</b> {{ invoice_date }}</p>
{% endif %}

{% if po_numbers %}
<p><b>ğŸ“Œ Ref PO:</b> {{ po_numbers }}</p>
{% endif %}

{% if result %}
<table>
<tr><th>ì œí’ˆëª…</th><th>ì´ ìˆ˜ëŸ‰</th><th>ì´ ê¸ˆì•¡</th></tr>
{% for name, data in result.items() %}
<tr>
    <td>{{ name }}</td>
    <td>{{ data.qty }}</td>
    <td>{{ "{:,.2f}".format(data.total) }}</td>
</tr>
{% endfor %}
</table>

<p><b>ğŸ’° ì´ ì¸ë³´ì´ìŠ¤ ê¸ˆì•¡:</b> {{ "{:,.2f}".format(total_amount) }} USD</p>
{% endif %}

</div>
{% endif %}

<script>
const dz = document.getElementById("dropZone");
const fi = document.getElementById("fileInput");

dz.addEventListener("click",()=>fi.click());
dz.addEventListener("dragover",(e)=>{ e.preventDefault(); dz.classList.add("dragover")});
dz.addEventListener("dragleave",()=>dz.classList.remove("dragover"));
dz.addEventListener("drop",(e)=>{ 
    e.preventDefault(); 
    dz.classList.remove("dragover"); 
    fi.files = e.dataTransfer.files; 
});
</script>

<div class="footer">Â© 2025 Invoice Genie ğŸ§™â€â™‚ï¸ â€” ìë™ ì¸ë³´ì´ìŠ¤ ì •ë¦¬ ë„êµ¬</div>
</body>
</html>
